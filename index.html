<!DOCTYPE html>
<html>
  <head>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
  </head>
  <body>
    <button onclick="requestPermission()">センサー許可</button>

    <a-scene>

      <!-- 追加の glb モデル -->
      <a-entity 
        gltf-model="url(Gift1.glb)" 
        position="0 1 -3" 
        scale="1 1 1">
      </a-entity>

      <!-- カメラ -->
      <a-entity id="camera" camera position="0 1.6 0"></a-entity>

      <!-- 環境設定 -->
      <a-light type="directional" position="1 1 1"></a-light>
      <a-sky color="#ECECEC"></a-sky>
    </a-scene>

    <script>
      function requestPermission() {
        if (DeviceMotionEvent.requestPermission) {
          DeviceMotionEvent.requestPermission().then(response => {
            if (response === "granted") {
              window.addEventListener("devicemotion", handleMotion);
            }
          });
        } else {
          window.addEventListener("devicemotion", handleMotion);
        }
      }

      function handleMotion(event) {
        const acceleration = event.accelerationIncludingGravity;
        const camera = document.querySelector("#camera");

        if (Math.abs(acceleration.x) > 1) {
          camera.object3D.position.x += acceleration.x * 0.01;
        }
        if (Math.abs(acceleration.y) > 1) {
          camera.object3D.position.y += acceleration.y * 0.01;
        }
        if (Math.abs(acceleration.z) > 1) {
          camera.object3D.position.z += acceleration.z * 0.01;
        }
      }
    </script>
  </body>
</html>